addons:
  velero:
    enabled: true
    plugins:
      - aws
    values:
      resources:
        server:
          requests:
            cpu: 1000m
            memory: 2Gi
          limits:
            cpu: 1000m
            memory: 2Gi
      credentials:
        useSecret: true
        name: "velero-bucket-credentials"
        secretContents:
          cloud: |
            [default]
            aws_access_key_id=###ZARF_VAR_VELERO_BUCKET_KEY###
            aws_secret_access_key=###ZARF_VAR_VELERO_BUCKET_KEY_SECRET###
      configuration:
        backupStorageLocation:
        - name: default
          provider: aws
          bucket: "###ZARF_VAR_VELERO_BUCKET###"
          config:
            region: "###ZARF_VAR_VELERO_BUCKET_REGION###"
            s3ForcePathStyle: true
            s3Url: "###ZARF_VAR_VELERO_BUCKET_PROVIDER_URL###"
          credential:
            name: "velero-bucket-credentials"
            key: "cloud"
        volumeSnapshotLocation:
        - name: default
          provider: aws
          config:
            region: "###ZARF_VAR_VELERO_BUCKET_REGION###"
          credential:
            name: "velero-bucket-credentials"
            key: "cloud"
      snapshotsEnabled: true
      schedules:
        uds-jira-backup:
          disabled: false
          schedule: "0 3 * * *"
          useOwnerReferencesInBackup: false
          template:
            csiSnapshotTimeout: 0s
            includeClusterResources: true
            snapshotVolumes: true
            includedNamespaces:
              - jira
            ttl: "240h"
        uds-confluence-backup:
          disabled: false
          schedule: "0 3 * * *"
          useOwnerReferencesInBackup: false
          template:
            csiSnapshotTimeout: 0s
            includeClusterResources: true
            snapshotVolumes: true
            includedNamespaces:
              - confluence
            ttl: "240h"
        uds-mattermost-backup:
          disabled: false
          schedule: "0 3 * * *"
          useOwnerReferencesInBackup: false
          template:
            csiSnapshotTimeout: 0s
            includeClusterResources: true
            snapshotVolumes: true
            includedNamespaces:
              - mattermost
            ttl: "240h"
        uds-nexus-backup:
          disabled: false
          schedule: "0 3 * * *"
          useOwnerReferencesInBackup: false
          template:
            csiSnapshotTimeout: 0s
            includeClusterResources: true
            snapshotVolumes: true
            includedNamespaces:
              - nexus
            ttl: "240h"
        uds-gitlab-backup:
          disabled: false
          schedule: "0 3 * * *"
          useOwnerReferencesInBackup: false
          template:
            csiSnapshotTimeout: 0s
            includeClusterResources: true
            snapshotVolumes: true
            includedNamespaces:
              - gitlab
            ttl: "240h"
